# 接客ロープレ SaaSアプリ

接客スタッフ向けの社員研修用ロールプレイアプリケーションです。AI駆動の自動評価システムにより、接客スキルの向上をサポートします。

## 🎯 プロジェクト概要

### 目的
- 接客スタッフのスキル向上を支援する研修プラットフォーム
- AIによる客観的で一貫性のある評価システム
- 継続的な学習と振り返りを促進する機能

### メイン機能
- 🎙️ **音声録音**: ブラウザベースの高品質録音
- 🤖 **AI評価**: OpenAI GPT-4oによる自動評価・フィードバック
- 📊 **スコア管理**: 評価履歴とスキル推移の可視化
- 💬 **リフレクションチャット**: AIとの対話による振り返り支援
- 📚 **柔軟な管理**: マニュアル・評価項目・シナリオの管理
- 🎯 **シーン別評価**: 基本スキル + シーン固有スキルの二重評価

## 📈 バージョン履歴

### 2025-08-08 v1.4.0 - UI/UX大幅改善
- **UI改善**: 評価画面下段を3分割化（Reflection Chat + Basic Skills + Scene-Specific Skills）
- **グラフ最適化**: チャートサイズ拡大＆視認性向上
- **カラーデザイン**: 最新SaaS風カラーパレットに変更
- **ナビゲーション**: UI改善とユーザビリティ向上
- **シーン管理**: シーン固有評価項目の追加機能

### 2025-08-07 v1.3.0 - 評価システム強化
- **二重評価システム**: 基本スキル + シーン固有スキル
- **シーン別エッジファンクション**: 9つのシーンに対応した評価ロジック
- **評価チャート**: 基本スキル・特有スキルの2種類表示
- **リフレクションチャット**: AIとの対話による改善提案

### 2025-08-06 v1.2.0 - 学習支援機能追加
- **学習プランナー**: 個人の学習計画作成・管理
- **スキル分析**: 詳細なスキル推移グラフ
- **レポート機能**: PDF出力による評価結果保存

### 2025-08-05 v1.1.0 - 管理機能拡張
- **マニュアル管理**: 接客マニュアルのCRUD機能
- **シナリオ管理**: ロールプレイシナリオの管理
- **評価基準**: カスタム評価項目の設定

### 2025-08-04 v1.0.0 - 初期リリース
- **音声録音**: ブラウザベース録音機能
- **AI評価**: GPT-4oによる自動評価
- **基本ダッシュボード**: 評価結果の表示

## 🎨 UI仕様変更点

### 評価画面レイアウト（v1.4.0）
```
┌─────────────────────────────────────┐
│           上段: 総合評価             │
├─────────────────────────────────────┤
│ 下段: 3分割レイアウト               │
├─────────┬─────────┬─────────────────┤
│Reflection│Basic    │Scene-Specific   │
│Chat     │Skills   │Skills           │
└─────────┴─────────┴─────────────────┘
```

### カラーパレット（最新SaaS風）
- **プライマリ**: `#3B82F6` (Blue-500)
- **セカンダリ**: `#10B981` (Emerald-500)
- **アクセント**: `#F59E0B` (Amber-500)
- **背景**: `#F8FAFC` (Slate-50)
- **テキスト**: `#1E293B` (Slate-800)

### 改善ポイント
- **カード統一**: 高さを揃え、余白を最適化
- **グラフ拡大**: 視認性向上のためサイズ拡大
- **レスポンシブ**: モバイル対応の強化

## 🚀 機能拡張点

### 二重評価システム
1. **基本スキル評価**（全シーン共通）
   - 敬語・言葉遣い
   - 共感・傾聴
   - 説明の分かりやすさ
   - 問題解決力
   - プロフェッショナリズム

2. **シーン固有スキル評価**（シーン別）
   - シーン001-009: 各シーンに特化した評価項目
   - カスタム評価基準の設定可能

### エッジファンクション構成
- `evaluate/` - 基本評価
- `evaluate_scene_001/` - `evaluate_scene_009/` - シーン別評価
- `reflection-chat/` - リフレクションチャット
- `whisper/` - 音声認識

### リフレクションチャット機能
- AIとの対話による振り返り支援
- 改善提案の自動生成
- 学習目標の設定支援

## 🛠️ 技術スタック

### フロントエンド
- **Next.js 15.4.5** (App Router)
- **React 19.1.0**
- **TypeScript 5**
- **Tailwind CSS 4**
- **Chart.js / Recharts** (グラフ表示)
- **Radix UI** (UIコンポーネント)

### バックエンド
- **Supabase** (PostgreSQL + Edge Functions)
- **OpenAI GPT-4o** (AI評価)
- **Whisper API** (音声認識)

### データベース
- **PostgreSQL** (Supabase)
- **Vector Extension** (埋め込みベクトル)
- **Row Level Security** (RLS)

## 📊 プロジェクト統計

- **総コード行数**: 約10,000行（独自コード）
- **フロントエンド**: 5,230行
- **バックエンド**: 4,739行
- **UIコンポーネント**: 16個
- **Edge Functions**: 12個

## 🗂️ プロジェクト構造

```
roleplay-app/
├── src/
│   ├── app/                    # Next.js App Router
│   │   ├── dashboard/         # ダッシュボード
│   │   ├── record/            # 録音画面
│   │   ├── result/[id]/       # 結果表示
│   │   ├── history/           # 履歴一覧
│   │   ├── scenes/            # シーン一覧
│   │   └── admin/             # 管理画面
│   ├── components/ui/         # UIコンポーネント（16個）
│   ├── lib/                   # ユーティリティ
│   └── types/                 # TypeScript型定義
├── supabase/
│   ├── functions/             # Edge Functions（12個）
│   ├── migrations/            # データベースマイグレーション
│   └── schema.sql            # データベーススキーマ
```

## 🗄️ データベース設計

### 主要テーブル
- `manuals` - 接客マニュアル
- `scenarios` - ロールプレイシナリオ
- `recordings` - 録音記録
- `evaluations` - 総合評価
- `feedback_notes` - 項目別フィードバック
- `evaluation_criteria` - 評価基準

## 🚀 セットアップ

### 1. 依存関係のインストール
```bash
npm install
```

### 2. 環境変数の設定
`.env.local`ファイルはすでに作成済みです。

### 3. Supabaseのセットアップ
1. Supabaseプロジェクトでデータベーステーブルを作成:
```bash
# supabase/schema.sql をSupabaseのSQL Editorで実行
```

2. ストレージバケットを作成:
```bash
# supabase/storage.sql をSupabaseのSQL Editorで実行
```

3. サンプルデータを挿入（任意）:
```bash
# supabase/seed.sql をSupabaseのSQL Editorで実行
```

4. Edge Functionsをデプロイ:
```bash
supabase functions deploy whisper
supabase functions deploy evaluate
supabase functions deploy evaluate_scene_001
# ... 他のシーン別関数も同様にデプロイ
```

### 4. OpenAI APIキーの設定
SupabaseプロジェクトのSecretsに`OPENAI_API_KEY`を設定してください。

## 🏃‍♂️ 開発

```bash
npm run dev
```

ブラウザで http://localhost:3000 を開きます。
（ポート3000使用中時は自動で3001, 3005等に切り替わります）

## 📦 ビルド

```bash
npm run build
```

## 🌐 デプロイ

VercelまたはRailwayにデプロイできます。環境変数を忘れずに設定してください。

## 🗺️ 今後の予定（Roadmap）

### v1.5.0 予定
- **モバイル最適化**: タッチ操作の改善
- **ダークモード**: 完全対応
- **カレンダー機能**: 学習スケジュール管理
- **音声解析高速化**: 処理時間の短縮

### v1.6.0 予定
- **チーム機能**: 複数ユーザー管理
- **リアルタイム評価**: ライブフィードバック
- **音声品質向上**: ノイズ除去機能
- **多言語対応**: 英語・中国語対応

### v2.0.0 予定
- **AI音声合成**: リアルタイム音声応答
- **VR/AR対応**: 没入型トレーニング
- **感情分析**: 音声トーン分析
- **予測分析**: スキル向上予測

## ⚠️ 注意事項

- 本プロトタイプは認証なしで実装されています
- 本番環境では適切な認証機能の実装が必要です
- OpenAI APIの利用料金にご注意ください
- 音声データの取り扱いには十分ご注意ください

## 🤝 コントリビューション

プロジェクトの改善提案やバグ報告は、GitHubのIssuesでお知らせください。

---

**最終更新**: 2025-08-08  
**バージョン**: v1.4.0  
**開発者**: Hideki Saito